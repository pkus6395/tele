import asyncio
import random
from datetime import datetime
from telegram import Bot

# TOKEN ‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏ó
TOKEN = '7918608396:AAG_e0h8qDD7IglKUFanyvC9UwKo8kiDqmE'

# ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
TARGET_CHAT_ID = '-1002533946981'  # ‡∏´‡∏£‡∏∑‡∏≠ @groupname

# ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏¢‡∏¥‡∏á
messages = [
    "üî• ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏•‡∏¢!",
    "üé∞ ‡∏™‡∏•‡πá‡∏≠‡∏ï‡πÅ‡∏ï‡∏Å‡∏á‡πà‡∏≤‡∏¢ 2025 ‡πÅ‡∏à‡∏Å‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢!",
    "üèÜ ‡∏Ñ‡∏≤‡∏™‡∏¥‡πÇ‡∏ô‡∏™‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°!",
]

# ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡∏á (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)
post_hours = [10, 14, 20]  # 10.00 ‡∏ô., 14.00 ‡∏ô., 20.00 ‡∏ô.

async def auto_post():
    bot = Bot(token=TOKEN)
    last_shot = None  # ‡πÑ‡∏ß‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤ "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏¥‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á" (‡∏Å‡∏±‡∏ô‡∏¢‡∏¥‡∏á‡∏ã‡πâ‡∏≥‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)

    while True:
        now = datetime.now()

        # ‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤ ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏´‡∏°
        if now.hour in post_hours:
            # ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏¢‡∏¥‡∏á‡πÉ‡∏ô‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ô‡∏µ‡πâ
            if last_shot != now.hour:
                message = random.choice(messages)
                try:
                    await bot.send_message(chat_id=TARGET_CHAT_ID, text=message, parse_mode='HTML')
                    print(f"‚úÖ ‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ({now.strftime('%H:%M')}) : {message}")
                except Exception as e:
                    print(f"‚ùå ‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: {e}")

                last_shot = now.hour  # ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ß‡πà‡∏≤‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ô‡∏µ‡πâ‡∏¢‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß

        # ‡∏£‡∏≠ 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ä‡πá‡∏Å‡πÉ‡∏´‡∏°‡πà
        await asyncio.sleep(60)

if __name__ == "__main__":
    asyncio.run(auto_post())
