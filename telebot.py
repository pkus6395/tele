import asyncio
import random
from datetime import datetime
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes

# ‡πÉ‡∏™‡πà Bot Token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å @BotFather
TOKEN = '7918608396:AAE3lYhme_BCHaubuS9iBIgum2kWCRwAdNs'

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏≠‡∏ó
app = ApplicationBuilder().token(TOKEN).build()

# ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏° (‡πÅ‡∏ö‡∏ö public) ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
group_usernames = [
    '-1002533946981'   # ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á Public ‡πÑ‡∏ß‡πâ
]

# ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡∏¢‡∏¥‡∏á
messages = [
    "üî• ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà! ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!",
    "üéØ ‡∏Ñ‡∏≤‡∏™‡∏¥‡πÇ‡∏ô‡∏™‡∏î ‡∏ù‡∏≤‡∏Å‡∏ñ‡∏≠‡∏ô‡πÑ‡∏ß ‡πÑ‡∏°‡πà‡∏á‡πâ‡∏≠‡πÄ‡∏≠‡πÄ‡∏¢‡πà‡∏ô‡∏ï‡πå!",
    "üé∞ ‡∏™‡∏•‡πá‡∏≠‡∏ï‡πÅ‡∏ï‡∏Å‡∏á‡πà‡∏≤‡∏¢ 2025 ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô!",
]

# ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏¢‡∏¥‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå
post_hours = [10, 14, 20]

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏≠‡∏ö /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [["üéØ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£", "üéÅ ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô"], ["üõ† ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô"]]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text(
        "‚úÖ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Casino168!\n‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üëá",
        reply_markup=reply_markup
    )

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
async def reply_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    if "‡∏™‡∏°‡∏±‡∏Ñ‡∏£" in text:
        await update.message.reply_text("‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà [‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà](https://play.ufa11k.co/signup?ref=aGWZqV)", parse_mode='Markdown')
    elif "‡πÇ‡∏õ‡∏£" in text:
        await update.message.reply_text("üéÅ ‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà [‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≤‡∏™‡∏¥‡πÇ‡∏ô](https://play.ufa11k.co/signup?ref=aGWZqV)", parse_mode='Markdown')
    elif "‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠" in text:
        await update.message.reply_text("üõ† ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà (https://play.ufa11k.co/signup?ref=aGWZqV)", parse_mode='Markdown')
    else:
        await update.message.reply_text("‚ùì ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö!")

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡πà‡∏°
async def auto_post():
    await app.start()
    while True:
        current_hour = datetime.now().hour
        if current_hour in post_hours:
            selected_message = random.choice(messages)
            selected_group = random.choice(group_usernames)

            try:
                await app.bot.send_message(chat_id=selected_group, text=selected_message, parse_mode='HTML')
                print(f"‚úÖ ‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°: {selected_message} ‡πÑ‡∏õ‡∏ó‡∏µ‡πà {selected_group}")
            except Exception as e:
                print(f"‚ùå ‡∏¢‡∏¥‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: {e}")

            await asyncio.sleep(3700)  # ‡∏£‡∏≠ 1 ‡∏ä‡∏°.
        else:
            await asyncio.sleep(600)  # ‡πÄ‡∏ä‡πá‡∏Å‡∏ó‡∏∏‡∏Å ‡πÜ 10 ‡∏ô‡∏≤‡∏ó‡∏µ

# ‡∏ú‡∏π‡∏Å Handler
app.add_handler(CommandHandler('start', start))
app.add_handler(MessageHandler(filters.TEXT, reply_message))

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏±‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
if __name__ == '__main__':
    loop = asyncio.get_event_loop()
    loop.create_task(auto_post())  # ‡∏¢‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    app.run_polling()              # ‡∏ü‡∏±‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á /start
